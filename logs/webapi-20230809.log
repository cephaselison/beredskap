[2023-08-09 10:53:03.536 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 10:53:03.773 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 10:53:03.773 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 10:53:03.773 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 10:53:03.773 +02:00  INF]  Hosting environment: Development
[2023-08-09 10:53:03.773 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 10:53:04.432 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 10:53:04.519 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 87.6252ms
[2023-08-09 10:53:04.594 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/favicon-32x32.png - -
[2023-08-09 10:53:04.604 +02:00  INF]  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2023-08-09 10:53:04.604 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/favicon-32x32.png - - - 200 628 image/png 9.5997ms
[2023-08-09 10:53:04.630 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 10:53:04.712 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 82.4070ms
[2023-08-09 10:54:45.943 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 10:54:46.189 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 10:54:46.189 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 10:54:46.190 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 10:54:46.190 +02:00  INF]  Hosting environment: Development
[2023-08-09 10:54:46.190 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 10:54:46.817 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 10:54:46.902 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 85.3108ms
[2023-08-09 10:54:46.990 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 10:54:47.063 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 73.7168ms
[2023-08-09 10:55:57.991 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 10:58:36.523 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 10:58:37.284 +02:00  INF]  Executed DbCommand (502ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Site-1];
[2023-08-09 10:58:37.491 +02:00  INF]  Executed DbCommand (205ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Site-1] SET READ_COMMITTED_SNAPSHOT ON;
END;
[2023-08-09 10:58:37.515 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2023-08-09 10:58:37.549 +02:00  INF]  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
[2023-08-09 10:58:37.550 +02:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2023-08-09 10:58:37.558 +02:00  INF]  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2023-08-09 10:58:37.562 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[2023-08-09 10:58:37.567 +02:00  INF]  Applying migration '20220220111446_initial'.
[2023-08-09 10:58:37.604 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
[2023-08-09 10:58:37.606 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] nvarchar(450) NOT NULL,
    [TenantId] nvarchar(max) NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
[2023-08-09 10:58:37.609 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Key] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
);
[2023-08-09 10:58:37.611 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Venue] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Type] int NOT NULL,
    [TenantId] nvarchar(max) NULL,
    [CreatedBy] uniqueidentifier NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedBy] uniqueidentifier NOT NULL,
    [LastModifiedOn] datetime2 NULL,
    [DeletedOn] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [IsDeleted] bit NULL,
    CONSTRAINT [PK_Venue] PRIMARY KEY ([Id])
);
[2023-08-09 10:58:37.614 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
[2023-08-09 10:58:37.617 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
[2023-08-09 10:58:37.619 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
[2023-08-09 10:58:37.622 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
[2023-08-09 10:58:37.625 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
[2023-08-09 10:58:37.665 +02:00  INF]  Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (N'5dda1b52-5d12-460c-b850-f06042399356', N'3', N'editor', N'editor'),
(N'6fef51e2-e448-442a-90bb-0953200acd95', N'2', N'admin', N'admin'),
(N'a2a944eb-c572-4241-99c5-7d3c2b82cc46', N'4', N'basic', N'basic'),
(N'b761c12f-4f47-4722-9974-8bf705e4626b', N'1', N'root', N'root');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
[2023-08-09 10:58:37.676 +02:00  INF]  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutEnabled', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'TenantId', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TenantId], [TwoFactorEnabled], [UserName])
VALUES (N'297af0a9-060d-4ac7-b014-e421588150a0', 0, N'2c714f9a-890c-4919-97fc-53fd2d661094', N'admin@root.com', CAST(1 AS bit), CAST(0 AS bit), NULL, N'admin@root.com', N'ADMINROOT', N'AQAAAAEAACcQAAAAEIEGR4n5S60zP4+AON1SKju6/tlP/sv3pUUutojaQM83v15bJtCxM8Njak388NN2qg==', N'+111111111111', CAST(1 AS bit), N'4dab1165-4c3c-42c5-9504-d10971398bfe', N'297af0a9-060d-4ac7-b014-e421588150a0', CAST(0 AS bit), N'adminRoot');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutEnabled', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'TenantId', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
[2023-08-09 10:58:37.684 +02:00  INF]  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'IsActive', N'Key') AND [object_id] = OBJECT_ID(N'[Tenant]'))
    SET IDENTITY_INSERT [Tenant] ON;
INSERT INTO [Tenant] ([Id], [IsActive], [Key])
VALUES ('297af0a9-060d-4ac7-b014-e421588150a0', CAST(1 AS bit), N'root');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'IsActive', N'Key') AND [object_id] = OBJECT_ID(N'[Tenant]'))
    SET IDENTITY_INSERT [Tenant] OFF;
[2023-08-09 10:58:37.694 +02:00  INF]  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserRoles]'))
    SET IDENTITY_INSERT [AspNetUserRoles] ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (N'b761c12f-4f47-4722-9974-8bf705e4626b', N'297af0a9-060d-4ac7-b014-e421588150a0');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserRoles]'))
    SET IDENTITY_INSERT [AspNetUserRoles] OFF;
[2023-08-09 10:58:37.696 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
[2023-08-09 10:58:37.704 +02:00  INF]  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
[2023-08-09 10:58:37.707 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
[2023-08-09 10:58:37.709 +02:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
[2023-08-09 10:58:37.714 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
[2023-08-09 10:58:37.720 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
[2023-08-09 10:58:37.725 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
[2023-08-09 10:58:37.727 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220220111446_initial', N'6.0.1');
[2023-08-09 11:51:45.264 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 11:51:45.511 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 11:51:45.511 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 11:51:45.512 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 11:51:45.512 +02:00  INF]  Hosting environment: Development
[2023-08-09 11:51:45.512 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 11:51:46.001 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 11:51:46.109 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 108.9631ms
[2023-08-09 11:51:46.204 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 11:51:46.284 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 79.8835ms
[2023-08-09 11:52:21.412 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens - 0
[2023-08-09 11:52:21.482 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:52:21.495 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:52:24.449 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2950.5076ms
[2023-08-09 11:52:24.452 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:52:24.453 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:52:24.456 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens - 0 - 500 - text/plain;+charset=utf-8 3044.2911ms
[2023-08-09 11:53:04.802 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root application/json 1774
[2023-08-09 11:53:04.812 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:53:04.813 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:53:10.067 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 5254.009ms
[2023-08-09 11:53:10.067 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:53:10.067 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:53:10.068 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root application/json 1774 - 500 - text/plain;+charset=utf-8 5266.7332ms
[2023-08-09 11:53:38.324 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root text/plain 64
[2023-08-09 11:53:38.328 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:53:38.328 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:53:41.006 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2677.2773ms
[2023-08-09 11:53:41.006 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:53:41.006 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:53:41.008 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root text/plain 64 - 500 - text/plain;+charset=utf-8 2684.4569ms
[2023-08-09 11:54:08.877 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root application/json 64
[2023-08-09 11:54:08.878 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:08.878 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:54:10.553 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1674.874ms
[2023-08-09 11:54:10.553 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:10.554 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:54:10.555 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root application/json 64 - 500 - text/plain;+charset=utf-8 1681.1136ms
[2023-08-09 11:54:26.072 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 61
[2023-08-09 11:54:26.072 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:26.073 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:54:29.283 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 11:54:29.800 +02:00  INF]  Executed DbCommand (43ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 11:54:29.937 +02:00  INF]  Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 11:54:30.045 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 11:54:30.057 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 3983.9648ms
[2023-08-09 11:54:30.058 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:30.068 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 61 - 200 - application/json;+charset=utf-8 3996.8588ms
[2023-08-09 11:54:36.776 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root application/json 65
[2023-08-09 11:54:36.776 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:36.777 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:54:38.877 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2100.3908ms
[2023-08-09 11:54:38.878 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:38.879 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:54:38.882 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens?tenant=root application/json 65 - 500 - text/plain;+charset=utf-8 2104.9828ms
[2023-08-09 11:54:40.519 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 11:54:40.520 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 1.4387ms
[2023-08-09 11:54:48.123 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 61
[2023-08-09 11:54:48.123 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:48.123 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:54:50.327 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 11:54:50.339 +02:00  INF]  Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 11:54:50.347 +02:00  INF]  Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 11:54:50.349 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 11:54:50.349 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2225.4652ms
[2023-08-09 11:54:50.349 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:54:50.349 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 61 - 200 - application/json;+charset=utf-8 2226.7242ms
[2023-08-09 11:55:17.011 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65
[2023-08-09 11:55:17.011 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:55:17.011 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 11:55:19.187 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 11:55:19.363 +02:00  INF]  Executed DbCommand (124ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 11:55:19.375 +02:00  INF]  Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 11:55:19.376 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 11:55:19.376 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2364.3101ms
[2023-08-09 11:55:19.376 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 11:55:19.376 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65 - 200 - application/json;+charset=utf-8 2365.2034ms
[2023-08-09 11:56:31.474 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/api/Identity/profile - -
[2023-08-09 11:56:31.501 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.IdentityController.GetProfileDetailsAsync (AspNano.WebApi)'
[2023-08-09 11:56:31.508 +02:00  INF]  Route matched with {action = "GetProfileDetails", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfileDetailsAsync() on controller AspNano.WebApi.Controllers.IdentityController (AspNano.WebApi).
[2023-08-09 11:56:34.586 +02:00  INF]  Executed action AspNano.WebApi.Controllers.IdentityController.GetProfileDetailsAsync (AspNano.WebApi) in 3078.0729ms
[2023-08-09 11:56:34.587 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.IdentityController.GetProfileDetailsAsync (AspNano.WebApi)'
[2023-08-09 11:56:34.587 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method190(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:56:34.589 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/api/Identity/profile - - - 500 - text/plain;+charset=utf-8 3115.8519ms
[2023-08-09 11:57:59.531 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78
[2023-08-09 11:57:59.546 +02:00  INF]  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (root)
[2023-08-09 11:57:59.552 +02:00  INF]  AuthenticationScheme: Bearer was challenged.
[2023-08-09 11:57:59.552 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78 - 401 0 - 20.7010ms
[2023-08-09 11:58:01.631 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78
[2023-08-09 11:58:01.636 +02:00  INF]  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (root)
[2023-08-09 11:58:01.637 +02:00  INF]  AuthenticationScheme: Bearer was challenged.
[2023-08-09 11:58:01.637 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78 - 401 0 - 6.1143ms
[2023-08-09 11:58:41.201 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78
[2023-08-09 11:58:54.315 +02:00  ERR]  Exception occurred while processing message.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at AspNano.WebApi.Helper.RegisterServices.<>c.<ConfigureApplicationServices>b__0_5(TokenValidatedContext context) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi/Helper/RegisterServices.cs:line 75
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.TokenValidated(TokenValidatedContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2023-08-09 11:58:54.317 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at AspNano.WebApi.Helper.RegisterServices.<>c.<ConfigureApplicationServices>b__0_5(TokenValidatedContext context) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi/Helper/RegisterServices.cs:line 75
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.TokenValidated(TokenValidatedContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 11:58:54.318 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78 - 500 - text/plain;+charset=utf-8 13116.2996ms
[2023-08-09 11:59:09.141 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78
[2023-08-09 11:59:09.149 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi)'
[2023-08-09 11:59:09.153 +02:00  INF]  Route matched with {action = "SaveTenant", controller = "Tenants"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveTenant(AspNano.DTOs.TenantDTOs.CreateTenantRequest) on controller AspNano.WebApi.Controllers.TenantsController (AspNano.WebApi).
[2023-08-09 11:59:09.171 +02:00  INF]  Executing StatusCodeResult, setting HTTP status code 200
[2023-08-09 11:59:09.172 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi) in 18.2544ms
[2023-08-09 11:59:09.172 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi)'
[2023-08-09 11:59:09.172 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78 - 200 0 - 31.2233ms
[2023-08-09 11:59:12.548 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78
[2023-08-09 11:59:12.550 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi)'
[2023-08-09 11:59:12.551 +02:00  INF]  Route matched with {action = "SaveTenant", controller = "Tenants"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveTenant(AspNano.DTOs.TenantDTOs.CreateTenantRequest) on controller AspNano.WebApi.Controllers.TenantsController (AspNano.WebApi).
[2023-08-09 11:59:12.552 +02:00  INF]  Executing StatusCodeResult, setting HTTP status code 200
[2023-08-09 11:59:12.552 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi) in 0.827ms
[2023-08-09 11:59:12.552 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi)'
[2023-08-09 11:59:12.552 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78 - 200 0 - 4.2661ms
[2023-08-09 11:59:58.105 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tenants application/json 78
[2023-08-09 11:59:58.107 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TenantsController.SaveTenant (AspNano.WebApi)'
[2023-08-09 11:59:58.107 +02:00  INF]  Route matched with {action = "SaveTenant", controller = "Tenants"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveTenant(AspNano.DTOs.TenantDTOs.CreateTenantRequest) on controller AspNano.WebApi.Controllers.TenantsController (AspNano.WebApi).
[2023-08-09 12:05:53.425 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 12:05:53.676 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 12:05:53.676 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 12:05:53.676 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 12:05:53.676 +02:00  INF]  Hosting environment: Development
[2023-08-09 12:05:53.677 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 12:05:54.239 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 12:05:54.325 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 86.5287ms
[2023-08-09 12:05:54.383 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - -
[2023-08-09 12:05:54.387 +02:00  INF]  Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
[2023-08-09 12:05:54.387 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - - - 0 665 image/png 4.8100ms
[2023-08-09 12:05:54.520 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 12:05:54.598 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 78.8833ms
[2023-08-09 12:07:22.960 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Venues application/json 77
[2023-08-09 12:07:23.224 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.VenuesController.SaveAsync (AspNano.WebApi)'
[2023-08-09 12:07:23.234 +02:00  INF]  Route matched with {action = "Save", controller = "Venues"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(AspNano.DTOs.VenueDTOs.CreateVenueRequest) on controller AspNano.WebApi.Controllers.VenuesController (AspNano.WebApi).
[2023-08-09 12:07:32.873 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 12:07:33.353 +02:00  INF]  Executed DbCommand (38ms) [Parameters=[@__ef_filter__CurrentTenant_0='?' (Size = 4000), @__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Venue] AS [v]
        WHERE ([v].[TenantId] = @__ef_filter__CurrentTenant_0) AND (LOWER([v].[Name]) = @__ToLower_0)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 12:07:33.575 +02:00  INF]  Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Venue] ([Id], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [Description], [IsDeleted], [LastModifiedBy], [LastModifiedOn], [Name], [TenantId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2023-08-09 12:07:35.540 +02:00  INF]  Executing ObjectResult, writing value of type 'System.Guid'.
[2023-08-09 12:07:35.553 +02:00  INF]  Executed action AspNano.WebApi.Controllers.VenuesController.SaveAsync (AspNano.WebApi) in 12314.6129ms
[2023-08-09 12:07:35.554 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.VenuesController.SaveAsync (AspNano.WebApi)'
[2023-08-09 12:07:35.566 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Venues application/json 77 - 200 - application/json;+charset=utf-8 12605.6811ms
[2023-08-09 12:50:55.360 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 12:50:55.633 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 12:50:55.633 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 12:50:55.634 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 12:50:55.634 +02:00  INF]  Hosting environment: Development
[2023-08-09 12:50:55.634 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 12:50:56.282 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 12:50:56.366 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 84.3415ms
[2023-08-09 12:50:56.457 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 12:50:56.532 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 74.5769ms
[2023-08-09 13:03:04.787 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:03:05.048 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:03:05.049 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:03:05.049 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:03:05.049 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:03:05.049 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:03:05.626 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:03:05.715 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 89.1689ms
[2023-08-09 13:03:05.805 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:03:05.882 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 76.8495ms
[2023-08-09 13:08:39.802 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65
[2023-08-09 13:08:39.883 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:08:39.895 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:08:42.382 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2483.8367ms
[2023-08-09 13:08:42.385 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:08:42.387 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:08:42.391 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65 - 500 - text/plain;+charset=utf-8 2589.6315ms
[2023-08-09 13:08:57.239 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:08:57.244 +02:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:57.244 +02:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:57.244 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 405 0 - 5.1464ms
[2023-08-09 13:08:58.476 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:08:58.479 +02:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:58.480 +02:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:58.480 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 405 0 - 4.3820ms
[2023-08-09 13:08:58.775 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:08:58.778 +02:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:58.778 +02:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:58.778 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 405 0 - 2.7681ms
[2023-08-09 13:08:58.924 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:08:58.925 +02:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:58.926 +02:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:08:58.927 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 405 0 - 2.4407ms
[2023-08-09 13:10:20.276 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:10:20.277 +02:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:10:20.277 +02:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:10:20.277 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 405 0 - 1.0454ms
[2023-08-09 13:15:19.184 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:15:19.413 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:15:19.414 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:15:19.414 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:15:19.414 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:15:19.414 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:15:20.079 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:15:20.166 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 88.4185ms
[2023-08-09 13:15:20.234 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - -
[2023-08-09 13:15:20.239 +02:00  INF]  Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
[2023-08-09 13:15:20.239 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - - - 0 665 image/png 4.9565ms
[2023-08-09 13:15:20.330 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:15:20.404 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 73.9143ms
[2023-08-09 13:15:43.480 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:15:43.542 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:15:43.543 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:15:43.543 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 63.2040ms
[2023-08-09 13:16:58.873 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:16:59.126 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:16:59.126 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:16:59.126 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:16:59.126 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:16:59.126 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:16:59.814 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:16:59.892 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 78.1365ms
[2023-08-09 13:16:59.981 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:17:00.062 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 80.6265ms
[2023-08-09 13:17:04.360 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:17:04.458 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:17:04.458 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:17:04.458 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 97.7550ms
[2023-08-09 13:17:20.971 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:17:20.978 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:17:20.978 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:17:20.979 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 8.3330ms
[2023-08-09 13:19:12.888 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:19:13.118 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:19:13.118 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:19:13.118 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:19:13.118 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:19:13.118 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:19:13.750 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:19:13.830 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 81.2894ms
[2023-08-09 13:19:13.905 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - -
[2023-08-09 13:19:13.911 +02:00  INF]  Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
[2023-08-09 13:19:13.911 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - - - 0 665 image/png 6.0810ms
[2023-08-09 13:19:14.073 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:19:14.155 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 81.2158ms
[2023-08-09 13:19:17.664 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:19:17.727 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:19:17.730 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:19:17.742 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:19:21.650 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 3903.2992ms
[2023-08-09 13:19:21.653 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:19:21.653 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:19:21.658 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 3994.1610ms
[2023-08-09 13:19:28.071 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:19:28.075 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:19:28.077 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:19:28.077 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:19:35.888 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 7811.0998ms
[2023-08-09 13:19:35.889 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:19:35.889 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:19:35.891 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 7820.4257ms
[2023-08-09 13:19:55.257 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/api/tokens - -
[2023-08-09 13:19:55.259 +02:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:19:55.260 +02:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-08-09 13:19:55.260 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/api/tokens - - - 405 0 - 2.5764ms
[2023-08-09 13:19:55.287 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/favicon.ico - -
[2023-08-09 13:19:55.289 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/favicon.ico - - - 404 0 - 0.7485ms
[2023-08-09 13:22:11.348 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:22:11.348 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:22:11.348 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:22:11.348 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:22:23.033 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 11684.609ms
[2023-08-09 13:22:23.034 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:22:23.035 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:22:23.036 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 11688.0867ms
[2023-08-09 13:22:24.210 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:22:24.210 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:22:24.210 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:22:24.210 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:22:25.209 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 998.7687ms
[2023-08-09 13:22:25.209 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:22:25.210 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:22:25.211 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 1001.3570ms
[2023-08-09 13:23:03.184 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:23:03.186 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:23:03.186 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:23:03.186 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:23:17.917 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 14730.5415ms
[2023-08-09 13:23:17.917 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:23:17.917 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:23:17.919 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 14735.4681ms
[2023-08-09 13:23:40.226 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:23:40.446 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:23:40.446 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:23:40.446 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:23:40.446 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:23:40.446 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:23:40.599 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:23:40.671 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 72.5065ms
[2023-08-09 13:23:40.733 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - -
[2023-08-09 13:23:40.737 +02:00  INF]  Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
[2023-08-09 13:23:40.737 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/favicon-16x16.png - - - 0 665 image/png 4.0962ms
[2023-08-09 13:23:40.801 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:23:40.875 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 74.1721ms
[2023-08-09 13:27:08.613 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:27:08.669 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:27:08.695 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:27:08.695 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:27:08.698 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:27:08.698 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:27:08.712 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:27:08.712 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:27:16.837 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 8122.6305ms
[2023-08-09 13:27:16.837 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 8122.6527ms
[2023-08-09 13:27:16.839 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:27:16.839 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:27:16.839 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method18(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:27:16.841 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatcher|8_0(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task`1 matcherTask)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:27:16.842 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 8230.2526ms
[2023-08-09 13:27:16.842 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 8174.0195ms
[2023-08-09 13:28:04.070 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:28:04.074 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:28:04.075 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:28:04.075 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:28:18.635 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 14559.8949ms
[2023-08-09 13:28:18.635 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:28:18.635 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:28:18.637 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 14567.1070ms
[2023-08-09 13:29:11.277 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:29:11.277 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:29:11.277 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:29:11.278 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:29:17.493 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 6212.3306ms
[2023-08-09 13:29:17.493 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:29:17.494 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:29:17.495 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 6218.7627ms
[2023-08-09 13:31:34.216 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:31:34.459 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:31:34.460 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:31:34.460 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:31:34.460 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:31:34.460 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:31:35.200 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:31:35.277 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 77.1577ms
[2023-08-09 13:31:35.379 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:31:35.461 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 82.0389ms
[2023-08-09 13:31:59.586 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:31:59.651 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:31:59.653 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:31:59.666 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:32:04.038 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 4366.5917ms
[2023-08-09 13:32:04.041 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:32:04.041 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:32:04.047 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 4461.0890ms
[2023-08-09 13:32:12.335 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:32:12.337 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:32:12.337 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:32:12.337 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:32:21.911 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 9573.9142ms
[2023-08-09 13:32:21.912 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:32:21.913 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:32:21.915 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 9579.9913ms
[2023-08-09 13:32:24.492 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:32:24.494 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:32:24.494 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:32:24.494 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:33:22.835 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 58341.0905ms
[2023-08-09 13:33:22.835 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:33:22.836 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:33:22.838 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 58346.4773ms
[2023-08-09 13:34:24.741 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:34:24.742 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:34:24.742 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:34:24.742 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:35:11.350 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 46607.1251ms
[2023-08-09 13:35:11.350 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:35:11.351 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 39
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:35:11.352 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 46611.5794ms
[2023-08-09 13:37:27.574 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:37:27.818 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:37:27.818 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:37:27.819 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:37:27.819 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:37:27.819 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:37:28.466 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:37:28.542 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 77.3147ms
[2023-08-09 13:37:28.645 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:37:28.725 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 79.3580ms
[2023-08-09 13:37:29.789 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:37:29.876 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:37:29.878 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:37:29.893 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:37:32.804 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2906.3675ms
[2023-08-09 13:37:32.807 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:37:32.807 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 40
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:37:32.814 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 3025.1561ms
[2023-08-09 13:38:26.937 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65
[2023-08-09 13:38:26.942 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:38:26.943 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:38:29.054 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2111.7738ms
[2023-08-09 13:38:29.055 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:38:29.055 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 40
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:38:29.056 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65 - 500 - text/plain;+charset=utf-8 2119.8986ms
[2023-08-09 13:38:56.233 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65
[2023-08-09 13:38:56.236 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:38:56.236 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:38:58.695 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 13:38:59.156 +02:00  INF]  Executed DbCommand (36ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 13:38:59.266 +02:00  INF]  Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 13:38:59.352 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 13:38:59.362 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 3126.0012ms
[2023-08-09 13:38:59.363 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:38:59.372 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 65 - 200 - application/json;+charset=utf-8 3138.6401ms
[2023-08-09 13:45:04.213 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 62
[2023-08-09 13:45:04.214 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:45:04.214 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:45:04.214 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:45:07.020 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2806.1745ms
[2023-08-09 13:45:07.021 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:45:07.021 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 40
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:45:07.023 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 62 - 500 - text/plain;+charset=utf-8 2808.9389ms
[2023-08-09 13:45:17.878 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 62
[2023-08-09 13:45:17.879 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:45:17.879 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:45:17.879 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:45:31.086 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 13204.4401ms
[2023-08-09 13:45:31.086 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:45:31.087 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 40
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:45:31.089 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 62 - 500 - text/plain;+charset=utf-8 13211.4207ms
[2023-08-09 13:46:01.119 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 62
[2023-08-09 13:46:01.120 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:46:01.123 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:46:01.123 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:46:02.756 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1632.9611ms
[2023-08-09 13:46:02.756 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:46:02.756 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 40
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:46:02.757 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/Tokens application/json 62 - 500 - text/plain;+charset=utf-8 1638.9448ms
[2023-08-09 13:46:07.134 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:46:07.134 +02:00  INF]  No CORS policy found for the specified request.
[2023-08-09 13:46:07.135 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:46:07.135 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:46:53.390 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 46236.6757ms
[2023-08-09 13:46:53.390 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:46:53.391 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 40
   at InvokeStub_TenantService..ctor(Object, Object, IntPtr*)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 13:46:53.392 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 500 - text/plain;+charset=utf-8 46240.1533ms
[2023-08-09 13:47:53.465 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:47:53.703 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:47:53.703 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:47:53.703 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:47:53.703 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:47:53.703 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:47:54.355 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:47:54.428 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 73.8689ms
[2023-08-09 13:47:54.517 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:47:54.593 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 75.5452ms
[2023-08-09 13:48:00.632 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:48:00.705 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:48:00.705 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:48:00.705 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 73.7586ms
[2023-08-09 13:49:21.357 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:21.365 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:21.365 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:21.365 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 7.8854ms
[2023-08-09 13:49:22.854 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:22.857 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:22.857 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:22.858 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 4.1632ms
[2023-08-09 13:49:23.472 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:23.473 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:23.473 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:23.473 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 1.3622ms
[2023-08-09 13:49:23.635 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:23.637 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:23.637 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:23.637 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 1.5752ms
[2023-08-09 13:49:23.812 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:23.813 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:23.813 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:23.814 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 1.7357ms
[2023-08-09 13:49:23.993 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:23.995 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:23.996 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:23.996 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 3.0900ms
[2023-08-09 13:49:29.437 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:29.439 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:29.439 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:29.439 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 2.7536ms
[2023-08-09 13:49:33.367 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 13:49:33.369 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:33.369 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:33.369 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 1.9735ms
[2023-08-09 13:49:36.396 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:49:36.397 +02:00  INF]  CORS policy execution failed.
[2023-08-09 13:49:36.397 +02:00  INF]  Request origin https://localhost:44418 does not have permission to access the resource.
[2023-08-09 13:49:36.397 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.2026ms
[2023-08-09 13:50:18.673 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 13:50:18.893 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 13:50:18.893 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 13:50:18.893 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 13:50:18.893 +02:00  INF]  Hosting environment: Development
[2023-08-09 13:50:18.893 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 13:50:19.569 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 13:50:19.642 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 73.9610ms
[2023-08-09 13:50:19.725 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 13:50:19.802 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 77.1670ms
[2023-08-09 13:50:22.437 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:50:22.511 +02:00  INF]  CORS policy execution successful.
[2023-08-09 13:50:22.512 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 75.6942ms
[2023-08-09 13:50:22.541 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 13:50:22.542 +02:00  INF]  CORS policy execution successful.
[2023-08-09 13:50:22.596 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:50:22.612 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:50:28.256 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 13:50:28.690 +02:00  INF]  Executed DbCommand (33ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 13:50:28.777 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 13:50:28.864 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 13:50:28.877 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 6262.2104ms
[2023-08-09 13:50:28.878 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:50:28.887 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 6346.3042ms
[2023-08-09 13:51:00.531 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:51:00.534 +02:00  INF]  CORS policy execution successful.
[2023-08-09 13:51:00.534 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 3.7888ms
[2023-08-09 13:51:00.554 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 13:51:00.555 +02:00  INF]  CORS policy execution successful.
[2023-08-09 13:51:00.556 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:51:00.556 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:51:02.442 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 13:51:02.449 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 13:51:02.454 +02:00  INF]  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 13:51:02.455 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 13:51:02.455 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1898.8065ms
[2023-08-09 13:51:02.455 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:51:02.455 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 1901.6637ms
[2023-08-09 13:51:05.690 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 13:51:05.691 +02:00  INF]  CORS policy execution successful.
[2023-08-09 13:51:05.691 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.0304ms
[2023-08-09 13:51:05.720 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 13:51:05.721 +02:00  INF]  CORS policy execution successful.
[2023-08-09 13:51:05.721 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:51:05.722 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 13:51:06.304 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 13:51:06.324 +02:00  INF]  Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 13:51:06.327 +02:00  INF]  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 13:51:06.327 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 13:51:06.327 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 605.8109ms
[2023-08-09 13:51:06.328 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 13:51:06.328 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 607.3124ms
[2023-08-09 14:17:21.520 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:17:21.520 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:17:21.520 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.7826ms
[2023-08-09 14:17:21.528 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:17:21.528 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:17:21.528 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:17:21.528 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:17:24.741 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:17:24.847 +02:00  INF]  Executed DbCommand (26ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:17:24.880 +02:00  INF]  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:17:24.880 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:17:24.881 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 3352.0662ms
[2023-08-09 14:17:24.881 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:17:24.881 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 3353.1145ms
[2023-08-09 14:17:57.027 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:17:57.027 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:17:57.027 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.6449ms
[2023-08-09 14:17:57.085 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:17:57.085 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:17:57.085 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:17:57.086 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:17:57.089 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:17:57.120 +02:00  INF]  Executed DbCommand (29ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:17:57.240 +02:00  INF]  Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:17:57.243 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:17:57.243 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 157.5322ms
[2023-08-09 14:17:57.243 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:17:57.244 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 158.5910ms
[2023-08-09 14:18:19.092 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:18:19.093 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:18:19.094 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 2.1873ms
[2023-08-09 14:18:19.127 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:18:19.128 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:18:19.128 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:18:19.128 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:18:19.131 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:18:19.160 +02:00  INF]  Executed DbCommand (28ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:18:19.313 +02:00  INF]  Executed DbCommand (121ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:18:19.314 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:18:19.314 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 186.5106ms
[2023-08-09 14:18:19.315 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:18:19.315 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 187.5979ms
[2023-08-09 14:19:00.909 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:19:00.910 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:19:00.911 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.3441ms
[2023-08-09 14:19:00.942 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:19:00.943 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:19:00.943 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:19:00.943 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:19:00.945 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:19:01.014 +02:00  INF]  Executed DbCommand (68ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:19:01.042 +02:00  INF]  Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:19:01.044 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:19:01.044 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 100.8214ms
[2023-08-09 14:19:01.044 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:19:01.044 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 102.9390ms
[2023-08-09 14:24:45.967 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:24:45.967 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:24:45.967 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.7131ms
[2023-08-09 14:24:45.976 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:24:45.977 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:24:45.977 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:24:45.977 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:24:45.978 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:24:46.146 +02:00  INF]  Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:24:46.154 +02:00  INF]  Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:24:46.155 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:24:46.155 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 178.1053ms
[2023-08-09 14:24:46.155 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:24:46.155 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 178.6170ms
[2023-08-09 14:25:13.887 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:25:13.889 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:25:13.889 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 2.4570ms
[2023-08-09 14:25:13.912 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:25:13.912 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:25:13.912 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:25:13.912 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:25:13.913 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:25:14.004 +02:00  INF]  Executed DbCommand (71ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:25:14.036 +02:00  INF]  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:25:14.036 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:25:14.036 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 124.2012ms
[2023-08-09 14:25:14.036 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:25:14.036 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 124.8279ms
[2023-08-09 14:25:19.964 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:25:19.964 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:25:19.965 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.4491ms
[2023-08-09 14:25:20.023 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:25:20.023 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:25:20.024 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:25:20.024 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:25:20.024 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:25:20.030 +02:00  INF]  Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:25:20.061 +02:00  INF]  Executed DbCommand (30ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:25:20.062 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:25:20.062 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 38.1098ms
[2023-08-09 14:25:20.062 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:25:20.062 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 38.6068ms
[2023-08-09 14:29:40.014 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:29:40.016 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:29:40.016 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.5284ms
[2023-08-09 14:29:40.018 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:29:40.018 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:29:40.018 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:29:40.018 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:29:40.019 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:29:40.099 +02:00  INF]  Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:29:40.165 +02:00  INF]  Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:29:40.165 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:29:40.165 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 147.4617ms
[2023-08-09 14:29:40.166 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:29:40.166 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 147.8761ms
[2023-08-09 14:44:37.650 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:44:37.650 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:44:37.650 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.6547ms
[2023-08-09 14:44:37.663 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:44:37.663 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:44:37.663 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:44:37.663 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:44:37.664 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:44:37.755 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:44:37.760 +02:00  INF]  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:44:37.760 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:44:37.760 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 97.4551ms
[2023-08-09 14:44:37.760 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:44:37.760 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 97.9871ms
[2023-08-09 14:45:12.823 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:45:12.849 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:45:12.849 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 50.5017ms
[2023-08-09 14:45:12.851 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:45:12.852 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:45:12.852 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:45:12.852 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:45:12.852 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:45:12.860 +02:00  INF]  Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:45:12.864 +02:00  INF]  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:45:12.864 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:45:12.864 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 12.6209ms
[2023-08-09 14:45:12.864 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:45:12.865 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 13.0729ms
[2023-08-09 14:45:31.733 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:45:31.733 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:45:31.734 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.0417ms
[2023-08-09 14:45:31.768 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:45:31.768 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:45:31.768 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:45:31.768 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:45:31.771 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:45:31.832 +02:00  INF]  Executed DbCommand (59ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:45:31.964 +02:00  INF]  Executed DbCommand (92ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:45:31.973 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:45:31.974 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 205.7806ms
[2023-08-09 14:45:31.975 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:45:31.975 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 206.9824ms
[2023-08-09 14:56:21.970 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 14:56:21.972 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:56:21.974 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.7913ms
[2023-08-09 14:56:21.985 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 14:56:21.985 +02:00  INF]  CORS policy execution successful.
[2023-08-09 14:56:21.986 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:56:21.986 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 14:56:21.986 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 14:56:22.017 +02:00  INF]  Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 14:56:22.030 +02:00  INF]  Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 14:56:22.030 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 14:56:22.030 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 44.5566ms
[2023-08-09 14:56:22.030 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 14:56:22.030 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 45.0451ms
[2023-08-09 15:00:55.628 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:00:55.630 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:00:55.630 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.4326ms
[2023-08-09 15:00:55.639 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:00:55.641 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:00:55.641 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:00:55.641 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:00:55.642 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:00:55.680 +02:00  INF]  Executed DbCommand (37ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:00:55.690 +02:00  INF]  Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:00:55.691 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:00:55.691 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 49.7432ms
[2023-08-09 15:00:55.691 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:00:55.691 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 51.4785ms
[2023-08-09 15:02:26.039 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:02:26.039 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:02:26.039 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.6611ms
[2023-08-09 15:02:26.095 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:02:26.095 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:02:26.095 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:02:26.096 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:02:26.100 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:02:26.150 +02:00  INF]  Executed DbCommand (45ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:02:26.158 +02:00  INF]  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:02:26.159 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:02:26.159 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 63.4822ms
[2023-08-09 15:02:26.159 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:02:26.159 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 64.5018ms
[2023-08-09 15:03:44.977 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 15:03:45.279 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 15:03:45.279 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 15:03:45.279 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 15:03:45.279 +02:00  INF]  Hosting environment: Development
[2023-08-09 15:03:45.279 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 15:04:26.574 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:04:26.645 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:04:26.653 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 79.8336ms
[2023-08-09 15:04:26.657 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:04:26.658 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:04:26.660 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:04:26.673 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:04:31.526 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:04:31.985 +02:00  INF]  Executed DbCommand (38ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:04:32.958 +02:00  INF]  Executed DbCommand (41ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
[2023-08-09 15:04:33.103 +02:00  INF]  Executed DbCommand (27ms) [Parameters=[@p15='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p16='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TenantId] = @p12, [TwoFactorEnabled] = @p13, [UserName] = @p14
WHERE [Id] = @p15 AND [ConcurrencyStamp] = @p16;
SELECT @@ROWCOUNT;
[2023-08-09 15:04:33.211 +02:00  INF]  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:04:33.302 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:04:33.320 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 6644.5632ms
[2023-08-09 15:04:33.321 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:04:33.331 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 6674.5960ms
[2023-08-09 15:04:38.249 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:04:38.250 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:04:38.250 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.6458ms
[2023-08-09 15:04:38.282 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:04:38.283 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:04:38.283 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:04:38.284 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:04:42.029 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:04:42.053 +02:00  INF]  Executed DbCommand (21ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:04:44.289 +02:00  INF]  Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:34:50.846 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:34:50.896 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1811734.6056ms
[2023-08-09 15:34:50.896 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:34:50.896 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 1811736.6085ms
[2023-08-09 15:34:50.953 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:34:50.953 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:34:50.953 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.4987ms
[2023-08-09 15:34:50.955 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:34:50.955 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:34:50.955 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:34:50.956 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:34:52.832 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:34:52.927 +02:00  INF]  Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:38:24.918 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 15:38:25.163 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 15:38:25.164 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 15:38:25.164 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 15:38:25.164 +02:00  INF]  Hosting environment: Development
[2023-08-09 15:38:25.164 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 15:38:25.788 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 15:38:25.863 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 75.6077ms
[2023-08-09 15:38:25.962 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 15:38:26.041 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 79.1643ms
[2023-08-09 15:38:32.184 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:38:32.248 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:38:32.249 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 64.9636ms
[2023-08-09 15:38:32.256 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:38:32.259 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:38:32.262 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:38:32.274 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:38:33.015 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:38:33.445 +02:00  INF]  Executed DbCommand (35ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:38:39.874 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 7592.0608ms
[2023-08-09 15:38:39.878 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:38:39.885 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.NotImplementedException: The method or operation is not implemented.
   at AspNano.Infrastructure.Multitenancy.TenantService.CheckExisting(String key) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 99
   at AspNano.WebApi.Controllers.TokensController.Login(String tenant, TokenRequest request) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi/Controllers/TokensController.cs:line 63
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:38:39.901 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 7644.6836ms
[2023-08-09 15:38:45.451 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:38:45.454 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:38:45.455 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 3.2815ms
[2023-08-09 15:38:45.485 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:38:45.485 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:38:45.485 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:38:45.486 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:38:45.522 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:38:45.543 +02:00  INF]  Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:38:47.110 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1623.4823ms
[2023-08-09 15:38:47.110 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:38:47.110 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.NotImplementedException: The method or operation is not implemented.
   at AspNano.Infrastructure.Multitenancy.TenantService.CheckExisting(String key) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 99
   at AspNano.WebApi.Controllers.TokensController.Login(String tenant, TokenRequest request) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi/Controllers/TokensController.cs:line 63
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:38:47.111 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 1626.8334ms
[2023-08-09 15:38:55.351 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:38:55.352 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:38:55.352 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.1427ms
[2023-08-09 15:38:55.433 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:38:55.433 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:38:55.434 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:38:55.434 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:38:55.457 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:38:55.505 +02:00  INF]  Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:38:59.219 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 3784.8062ms
[2023-08-09 15:38:59.219 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:38:59.220 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.NotImplementedException: The method or operation is not implemented.
   at AspNano.Infrastructure.Multitenancy.TenantService.CheckExisting(String key) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 99
   at AspNano.WebApi.Controllers.TokensController.Login(String tenant, TokenRequest request) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi/Controllers/TokensController.cs:line 63
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:38:59.221 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 3788.0684ms
[2023-08-09 15:42:21.611 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 15:42:21.839 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 15:42:21.839 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 15:42:21.839 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 15:42:21.839 +02:00  INF]  Hosting environment: Development
[2023-08-09 15:42:21.839 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 15:42:22.537 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 15:42:22.621 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 84.5627ms
[2023-08-09 15:42:22.711 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 15:42:22.789 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 77.9678ms
[2023-08-09 15:42:29.847 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:42:29.926 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:42:29.926 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 79.9537ms
[2023-08-09 15:42:29.939 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:42:29.942 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:42:29.944 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:42:29.957 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:42:30.101 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 141.9815ms
[2023-08-09 15:42:30.103 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:42:30.103 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:42:30.118 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 179.0564ms
[2023-08-09 15:42:35.500 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:42:35.504 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:42:35.505 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 5.9475ms
[2023-08-09 15:42:35.551 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:42:35.552 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:42:35.553 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:42:35.553 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:42:35.572 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 18.8701ms
[2023-08-09 15:42:35.573 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:42:35.573 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:42:35.574 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 22.6764ms
[2023-08-09 15:43:02.955 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 15:43:03.187 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 15:43:03.187 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 15:43:03.188 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 15:43:03.188 +02:00  INF]  Hosting environment: Development
[2023-08-09 15:43:03.188 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 15:43:03.906 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 15:43:03.983 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 77.1311ms
[2023-08-09 15:43:04.075 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 15:43:04.153 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 78.6010ms
[2023-08-09 15:43:20.260 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:43:20.348 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:43:20.349 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 88.7177ms
[2023-08-09 15:43:20.350 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:43:20.351 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:43:20.356 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:43:20.368 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:43:20.498 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 128.0841ms
[2023-08-09 15:43:20.500 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:43:20.500 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:43:20.515 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 164.2645ms
[2023-08-09 15:43:24.383 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:43:24.388 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:43:24.403 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:43:24.404 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:43:24.426 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 21.2937ms
[2023-08-09 15:43:24.426 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:43:24.426 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:43:24.428 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 44.6615ms
[2023-08-09 15:43:48.407 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:43:48.408 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:43:48.411 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 3.9517ms
[2023-08-09 15:43:48.471 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:43:48.471 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:43:48.471 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:43:48.471 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:43:56.647 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 8175.388ms
[2023-08-09 15:43:56.647 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:43:56.647 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:43:56.648 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 8177.4241ms
[2023-08-09 15:45:27.987 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 15:45:28.219 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 15:45:28.219 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 15:45:28.219 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 15:45:28.219 +02:00  INF]  Hosting environment: Development
[2023-08-09 15:45:28.219 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 15:45:28.684 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 15:45:28.759 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 74.9787ms
[2023-08-09 15:45:28.850 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 15:45:28.925 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 74.7651ms
[2023-08-09 15:53:52.372 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:53:52.446 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:53:52.447 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 75.7815ms
[2023-08-09 15:53:52.501 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:53:52.503 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:53:52.532 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:53:52.545 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:53:56.788 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:53:56.797 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:53:56.797 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:53:56.982 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:54:00.503 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 3518.0707ms
[2023-08-09 15:54:00.503 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 7954.9003ms
[2023-08-09 15:54:00.504 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:54:00.504 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:54:00.504 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:54:00.505 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'AspNano.WebApi.Multitenancy.ITenantService' while attempting to activate 'AspNano.WebApi.Controllers.TokensController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 15:54:00.520 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 3732.0925ms
[2023-08-09 15:54:00.520 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 8019.1067ms
[2023-08-09 15:55:11.236 +02:00  INF]  User profile is available. Using '/Users/cephasjonsson/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[2023-08-09 15:55:11.487 +02:00  INF]  Now listening on: https://localhost:7250
[2023-08-09 15:55:11.487 +02:00  INF]  Now listening on: http://localhost:5250
[2023-08-09 15:55:11.487 +02:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-08-09 15:55:11.487 +02:00  INF]  Hosting environment: Development
[2023-08-09 15:55:11.487 +02:00  INF]  Content root path: /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.WebApi
[2023-08-09 15:55:12.213 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/index.html - -
[2023-08-09 15:55:12.291 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/index.html - - - 200 - text/html;charset=utf-8 78.2173ms
[2023-08-09 15:55:12.394 +02:00  INF]  Request starting HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - -
[2023-08-09 15:55:12.480 +02:00  INF]  Request finished HTTP/1.1 GET https://localhost:7250/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 85.5391ms
[2023-08-09 15:55:15.097 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:55:15.160 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:15.161 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 64.3265ms
[2023-08-09 15:55:15.165 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:55:15.166 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:15.170 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:15.182 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:55:18.126 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:55:18.576 +02:00  INF]  Executed DbCommand (36ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:55:22.809 +02:00  INF]  Executed DbCommand (49ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:55:23.349 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:55:23.441 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:55:23.455 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 8269.425ms
[2023-08-09 15:55:23.456 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:23.465 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 8300.0516ms
[2023-08-09 15:55:27.317 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:55:27.322 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:27.322 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 5.2130ms
[2023-08-09 15:55:27.328 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:55:27.328 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:27.329 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:27.330 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:55:27.366 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:55:27.406 +02:00  INF]  Executed DbCommand (36ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:55:28.523 +02:00  INF]  Executed DbCommand (6ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:55:28.529 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:55:28.530 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:55:28.531 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1200.5065ms
[2023-08-09 15:55:28.531 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:28.531 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 1202.7747ms
[2023-08-09 15:55:33.099 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:55:33.099 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:33.099 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 2.5262ms
[2023-08-09 15:55:33.130 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:55:33.131 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:33.131 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:33.131 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:55:33.139 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:55:33.163 +02:00  INF]  Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:55:37.811 +02:00  INF]  Executed DbCommand (11ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:55:37.820 +02:00  INF]  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:55:37.820 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:55:37.821 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 4689.5563ms
[2023-08-09 15:55:37.821 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:37.821 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 4690.7225ms
[2023-08-09 15:55:41.031 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:55:41.033 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:41.033 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 1.6003ms
[2023-08-09 15:55:41.146 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:55:41.147 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:55:41.147 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:41.147 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:55:41.151 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:55:41.174 +02:00  INF]  Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:55:53.936 +02:00  INF]  Executed DbCommand (8ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:55:53.945 +02:00  INF]  Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:55:53.946 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:55:53.946 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 12798.6578ms
[2023-08-09 15:55:53.946 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:55:53.946 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 12799.8010ms
[2023-08-09 15:56:02.117 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:56:02.118 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:56:02.118 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.7660ms
[2023-08-09 15:56:02.170 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:56:02.171 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:56:02.171 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:56:02.171 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:56:02.175 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:56:02.191 +02:00  INF]  Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:56:05.940 +02:00  INF]  Executed DbCommand (32ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:56:13.356 +02:00  INF]  Executed DbCommand (100ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:56:13.357 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:56:13.357 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 11185.8582ms
[2023-08-09 15:56:13.357 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:56:13.358 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 11186.9532ms
[2023-08-09 15:56:31.333 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 15:56:31.335 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:56:31.335 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 2.1833ms
[2023-08-09 15:56:31.337 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:56:31.338 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:56:31.338 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:56:31.338 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:56:31.340 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:56:31.354 +02:00  INF]  Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:56:38.954 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:56:38.978 +02:00  INF]  Executed DbCommand (23ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:56:38.979 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:56:38.979 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 7641.1358ms
[2023-08-09 15:56:38.979 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:56:38.979 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 7641.7310ms
[2023-08-09 15:57:40.650 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:57:40.651 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:57:40.651 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.6433ms
[2023-08-09 15:57:40.679 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:57:40.681 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:57:40.681 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:57:40.681 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:57:40.682 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:57:40.835 +02:00  INF]  Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:57:44.861 +02:00  INF]  Executed DbCommand (5ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:57:44.862 +02:00  INF]  Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
[2023-08-09 15:57:44.863 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 4181.2205ms
[2023-08-09 15:57:44.863 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:57:44.863 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 401 - application/problem+json;+charset=utf-8 4184.1877ms
[2023-08-09 15:57:48.471 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - -
[2023-08-09 15:57:48.471 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:57:48.472 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - - - 204 - - 0.7994ms
[2023-08-09 15:57:48.522 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 15:57:48.522 +02:00  INF]  CORS policy execution successful.
[2023-08-09 15:57:48.523 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:57:48.523 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 15:57:48.525 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 15:57:48.563 +02:00  INF]  Executed DbCommand (37ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 15:57:49.721 +02:00  INF]  Executed DbCommand (24ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 15:57:49.725 +02:00  INF]  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 15:57:49.726 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 15:57:49.726 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 1202.6484ms
[2023-08-09 15:57:49.726 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 15:57:49.726 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 1203.8511ms
[2023-08-09 16:15:41.145 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 16:15:41.146 +02:00  INF]  CORS policy execution successful.
[2023-08-09 16:15:41.147 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 1.2676ms
[2023-08-09 16:15:41.147 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 16:15:41.148 +02:00  INF]  CORS policy execution successful.
[2023-08-09 16:15:41.148 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 16:15:41.148 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 16:15:43.940 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2791.8324ms
[2023-08-09 16:15:43.940 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 16:15:43.941 +02:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: Invalid Tenant!
   at AspNano.Infrastructure.Multitenancy.TenantService..ctor(IHttpContextAccessor httpContextAccessor) in /Users/cephasjonsson/Documents/dev/dotnet-projects/AspNano-master/AspNano/AspNano.Infrastructure/Multitenancy/TenantService.cs:line 41
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2023-08-09 16:15:43.947 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 500 - text/plain;+charset=utf-8 2799.2265ms
[2023-08-09 16:15:43.948 +02:00  INF]  Connection id "0HMSOS102QEUS", Request id "0HMSOS102QEUS:00000002": the application completed without reading the entire request body.
[2023-08-09 16:15:52.398 +02:00  INF]  Request starting HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0
[2023-08-09 16:15:52.398 +02:00  INF]  CORS policy execution successful.
[2023-08-09 16:15:52.398 +02:00  INF]  Request finished HTTP/1.1 OPTIONS https://localhost:7250/api/tokens - 0 - 204 - - 0.6057ms
[2023-08-09 16:15:52.400 +02:00  INF]  Request starting HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52
[2023-08-09 16:15:52.401 +02:00  INF]  CORS policy execution successful.
[2023-08-09 16:15:52.401 +02:00  INF]  Executing endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 16:15:52.401 +02:00  INF]  Route matched with {action = "Login", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String, AspNano.DTOs.AuthDTOs.TokenRequest) on controller AspNano.WebApi.Controllers.TokensController (AspNano.WebApi).
[2023-08-09 16:15:52.402 +02:00  INF]  Entity Framework Core 6.0.1 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.1' with options: None
[2023-08-09 16:15:52.562 +02:00  INF]  Executed DbCommand (56ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TenantId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
[2023-08-09 16:15:54.900 +02:00  INF]  Executed DbCommand (29ms) [Parameters=[@__tenant_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tenant] AS [t]
        WHERE [t].[Key] = @__tenant_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2023-08-09 16:15:54.913 +02:00  INF]  Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
[2023-08-09 16:15:54.913 +02:00  INF]  Executing OkObjectResult, writing value of type '<>f__AnonymousType1`4[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2023-08-09 16:15:54.913 +02:00  INF]  Executed action AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi) in 2512.4561ms
[2023-08-09 16:15:54.913 +02:00  INF]  Executed endpoint 'AspNano.WebApi.Controllers.TokensController.Login (AspNano.WebApi)'
[2023-08-09 16:15:54.913 +02:00  INF]  Request finished HTTP/1.1 POST https://localhost:7250/api/tokens application/json 52 - 200 - application/json;+charset=utf-8 2513.0147ms
